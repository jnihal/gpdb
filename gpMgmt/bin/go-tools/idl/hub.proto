syntax = "proto3";

package idl;

option go_package= "../idl";

service Hub {
    rpc Stop(StopHubRequest) returns (StopHubReply) {}
    rpc StartAgents(StartAgentsRequest) returns (StartAgentsReply) {}
    rpc StatusAgents(StatusAgentsRequest) returns (StatusAgentsReply) {}
    rpc StopAgents(StopAgentsRequest) returns (StopAgentsReply) {}
    rpc MakeCluster(MakeClusterRequest) returns(MakeClusterReply) {}
}

message StopHubRequest {}

message StopHubReply {}

message StartAgentsRequest {}

message StartAgentsReply {}

message StatusAgentsRequest {}

message ServiceStatus {
    string host = 1;
    string status = 2;
    string uptime = 3;
    uint32 pid = 4;
}
message StatusAgentsReply {
    repeated ServiceStatus statuses = 1;
}

message StopAgentsRequest {}

message StopAgentsReply {}

message MakeClusterRequest {
    gpArray gpArray = 1;
    ClusterParams clusterParams = 2;
    bool forceFlag = 3;
}

message MakeClusterReply {}

message gpArray {
    Segment Coordinator = 1;
    repeated Segment Primaries = 2;
}

message Segment {
    int32 port = 1;
    string dataDirectory = 2;
    string hostName = 3;
    string hostAddress = 4;
}

message ClusterParams{
    map<string, string> CoordinatorConfig = 1;
    map<string, string> SegmentConfig = 2;
    map<string, string> CommonConfig = 3;
    Locale locale = 4;
    repeated string CoordinatorIpList = 5;
    bool hbaHostnames = 6;
    string encoding = 7;
    string suPassword = 8;
}

message Locale {
    string lc_all=1;
    string lc_collate=2;
    string lc_ctype = 3;
    string lc_messages=4;
    string lc_monetory=5;
    string lc_numeric=6;
    string lc_time=7;
}
