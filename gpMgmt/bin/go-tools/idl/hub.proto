syntax = "proto3";

package idl;

option go_package= "../idl";

service Hub {
    rpc Stop(StopHubRequest) returns (StopHubReply) {}
    rpc StartAgents(StartAgentsRequest) returns (StartAgentsReply) {}
    rpc StatusAgents(StatusAgentsRequest) returns (StatusAgentsReply) {}
    rpc StopAgents(StopAgentsRequest) returns (StopAgentsReply) {}
	rpc DummyHub(DummyHubRequest) returns (stream DummyHubResponse) {}
}

message DummyHubRequest {
	repeated DummyInput input = 1;
}

message DummyInput {
	string host = 1;
	uint32 value = 2;
}

message DummyHubResponse {
	string out = 1;
}

message StopHubRequest {}
message StopHubReply {}

message StartAgentsRequest {}
message StartAgentsReply {}

message StatusAgentsRequest {}
message ServiceStatus {
	string host = 1;
	string status = 2;
	string uptime = 3;
	uint32 pid = 4;
}
message StatusAgentsReply {
	repeated ServiceStatus statuses = 1;
}
message StopAgentsRequest {}
message StopAgentsReply {}
